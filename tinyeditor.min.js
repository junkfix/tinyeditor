function spell(e,t){const n=e=>{e&&(e.style.display="block")},a=e=>{e&&(e.style.display="none")},l=e=>(e+="").split(" ").map((e=>(e=>(e+="")[0].toUpperCase()+e.slice(1))(e))).join(" ");let s,i=1,o=(t,l=null,o)=>{"code"!=t?(document.execCommand("styleWithCSS",0,!0),document.execCommand(t,!1,l)):i?(i=0,n(e),a(s)):(i=1,a(e),s.innerHTML=e.value,n(s))},r=e=>/^https?:\//.test(e)?e:`http://${e}`,c=(e,t,n=[],a=(e=>document.createElement(e))(e))=>n.map((e=>e&&a.appendChild(e)))&&Object.assign(a,t),p=e=>c("input",{type:"color"}),d=(e,t)=>c("select",{},e.map((e=>c("option",{value:e,textContent:e>0?8+2*(e-1):l(e),style:t?'font-family:"'+e+'"':""})))),m={},u=e=>{for(let e in m)m[e].classList.toggle("selected",document.queryCommandState(e))},y=[[["bold"],["italic"],["underline"],["strikeThrough"],["justifyLeft"],["justifyCenter"]],[["fontName",d(["Arial","Arial Black","cursive","fantasy","Georgia","Impact","monospace","sans-serif","serif","Times","Verdana"],1)],["fontSize",d([...Array(7)].map(((e,t)=>t+1)))],["forecolor",p()],["hilitecolor",p()]].map((([e,t])=>[e,0,Object.assign(t,{onchange:n=>o(e,t.value)})])),[["insertUnorderedList"],["insertOrderedList"],["insertHorizontalRule"]],[["createLink","link",r],["insertImage","image",r]].map((([e,t,n])=>[t,a=>(a=prompt(`Enter the ${t} URL`))&&o(e,n(a))])),[["undo"],["redo"],["removeFormat"],["code"]]],h=c("div",{className:"spell"});return e=document.querySelector(e),h.setAttribute("style",e.getAttribute("style")),h.appendChild(c("div",{className:"spell-bar"},y.map((e=>c("div",{className:"spell-zone"},e.map((([e,t=(t=>o(e)),n])=>m[e]=c("button",{className:"spell-icon",type:"button",title:l(e.replace(/([^a-z])/g," $1")),onclick:t},[c("i",{className:"icon-"+e.toLowerCase()}),n])))))))),s=c("div",{className:"spell-content",contentEditable:!0,onkeydown:e=>9!==e.which,onkeyup:u,onmouseup:u}),h.appendChild(s),e.parentNode.insertBefore(h,e),h.appendChild(e),a(e),s.innerHTML=e.value,"input keyup change paste".split(" ").forEach((t=>s.addEventListener(t,(()=>{e.value=s.innerHTML})))),s}
